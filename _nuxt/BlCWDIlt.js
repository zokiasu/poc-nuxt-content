var j=t=>{throw TypeError(t)};var U=(t,i,r)=>i.has(t)||j("Cannot "+r);var w=(t,i,r)=>(U(t,i,"read from private field"),r?r.call(t):i.get(t)),A=(t,i,r)=>i.has(t)?j("Cannot add the same private member more than once"):i instanceof WeakSet?i.add(t):i.set(t,r);import{X as M,J as I,L as $,i as D,M as P,Y as N,n as x,h as T}from"./BgX3BpPR.js";function B(t,i){if(typeof t!="string")throw new TypeError("argument str must be a string");const r={},e=i||{},n=e.decode||L;let o=0;for(;o<t.length;){const s=t.indexOf("=",o);if(s===-1)break;let a=t.indexOf(";",o);if(a===-1)a=t.length;else if(a<s){o=t.lastIndexOf(";",s-1)+1;continue}const u=t.slice(o,s).trim();if(e!=null&&e.filter&&!(e!=null&&e.filter(u))){o=a+1;continue}if(r[u]===void 0){let c=t.slice(s+1,a).trim();c.codePointAt(0)===34&&(c=c.slice(1,-1)),r[u]=F(c,n)}o=a+1}return r}function L(t){return t.includes("%")?decodeURIComponent(t):t}function F(t,i){try{return i(t)}catch{return t}}const m=/^[\u0009\u0020-\u007E\u0080-\u00FF]+$/;function E(t,i,r){const e=r||{},n=e.encode||encodeURIComponent;if(typeof n!="function")throw new TypeError("option encode is invalid");if(!m.test(t))throw new TypeError("argument name is invalid");const o=n(i);if(o&&!m.test(o))throw new TypeError("argument val is invalid");let s=t+"="+o;if(e.maxAge!==void 0&&e.maxAge!==null){const a=e.maxAge-0;if(Number.isNaN(a)||!Number.isFinite(a))throw new TypeError("option maxAge is invalid");s+="; Max-Age="+Math.floor(a)}if(e.domain){if(!m.test(e.domain))throw new TypeError("option domain is invalid");s+="; Domain="+e.domain}if(e.path){if(!m.test(e.path))throw new TypeError("option path is invalid");s+="; Path="+e.path}if(e.expires){if(!_(e.expires)||Number.isNaN(e.expires.valueOf()))throw new TypeError("option expires is invalid");s+="; Expires="+e.expires.toUTCString()}if(e.httpOnly&&(s+="; HttpOnly"),e.secure&&(s+="; Secure"),e.priority)switch(typeof e.priority=="string"?e.priority.toLowerCase():e.priority){case"low":{s+="; Priority=Low";break}case"medium":{s+="; Priority=Medium";break}case"high":{s+="; Priority=High";break}default:throw new TypeError("option priority is invalid")}if(e.sameSite)switch(typeof e.sameSite=="string"?e.sameSite.toLowerCase():e.sameSite){case!0:{s+="; SameSite=Strict";break}case"lax":{s+="; SameSite=Lax";break}case"strict":{s+="; SameSite=Strict";break}case"none":{s+="; SameSite=None";break}default:throw new TypeError("option sameSite is invalid")}return e.partitioned&&(s+="; Partitioned"),s}function _(t){return Object.prototype.toString.call(t)==="[object Date]"||t instanceof Date}function O(t){return typeof t=="string"?`'${t}'`:new q().serialize(t)}const q=function(){var i;class t{constructor(){A(this,i,new Map)}compare(e,n){const o=typeof e,s=typeof n;return o==="string"&&s==="string"?e.localeCompare(n):o==="number"&&s==="number"?e-n:String.prototype.localeCompare.call(this.serialize(e,!0),this.serialize(n,!0))}serialize(e,n){if(e===null)return"null";switch(typeof e){case"string":return n?e:`'${e}'`;case"bigint":return`${e}n`;case"object":return this.$object(e);case"function":return this.$function(e)}return String(e)}serializeObject(e){const n=Object.prototype.toString.call(e);if(n!=="[object Object]")return this.serializeBuiltInType(n.length<10?`unknown:${n}`:n.slice(8,-1),e);const o=e.constructor,s=o===Object||o===void 0?"":o.name;if(s!==""&&globalThis[s]===o)return this.serializeBuiltInType(s,e);if(typeof e.toJSON=="function"){const a=e.toJSON();return s+(a!==null&&typeof a=="object"?this.$object(a):`(${this.serialize(a)})`)}return this.serializeObjectEntries(s,Object.entries(e))}serializeBuiltInType(e,n){const o=this["$"+e];if(o)return o.call(this,n);if(typeof(n==null?void 0:n.entries)=="function")return this.serializeObjectEntries(e,n.entries());throw new Error(`Cannot serialize ${e}`)}serializeObjectEntries(e,n){const o=Array.from(n).sort((a,u)=>this.compare(a[0],u[0]));let s=`${e}{`;for(let a=0;a<o.length;a++){const[u,c]=o[a];s+=`${this.serialize(u,!0)}:${this.serialize(c)}`,a<o.length-1&&(s+=",")}return s+"}"}$object(e){let n=w(this,i).get(e);return n===void 0&&(w(this,i).set(e,`#${w(this,i).size}`),n=this.serializeObject(e),w(this,i).set(e,n)),n}$function(e){const n=Function.prototype.toString.call(e);return n.slice(-15)==="[native code] }"?`${e.name||""}()[native]`:`${e.name}(${e.length})${n.replace(/\s*\n\s*/g,"")}`}$Array(e){let n="[";for(let o=0;o<e.length;o++)n+=this.serialize(e[o]),o<e.length-1&&(n+=",");return n+"]"}$Date(e){try{return`Date(${e.toISOString()})`}catch{return"Date(null)"}}$ArrayBuffer(e){return`ArrayBuffer[${new Uint8Array(e).join(",")}]`}$Set(e){return`Set${this.$Array(Array.from(e).sort((n,o)=>this.compare(n,o)))}`}$Map(e){return this.serializeObjectEntries("Map",e.entries())}}i=new WeakMap;for(const r of["Error","RegExp","URL"])t.prototype["$"+r]=function(e){return`${r}(${e})`};for(const r of["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"])t.prototype["$"+r]=function(e){return`${r}[${e.join(",")}]`};for(const r of["BigInt64Array","BigUint64Array"])t.prototype["$"+r]=function(e){return`${r}[${e.join("n,")}${e.length>0?"n":""}]`};return t}();function J(t,i){return t===i||O(t)===O(i)}function l(t){if(typeof t!="object")return t;var i,r,e=Object.prototype.toString.call(t);if(e==="[object Object]"){if(t.constructor!==Object&&typeof t.constructor=="function"){r=new t.constructor;for(i in t)t.hasOwnProperty(i)&&r[i]!==t[i]&&(r[i]=l(t[i]))}else{r={};for(i in t)i==="__proto__"?Object.defineProperty(r,i,{value:l(t[i]),configurable:!0,enumerable:!0,writable:!0}):r[i]=l(t[i])}return r}if(e==="[object Array]"){for(i=t.length,r=Array(i);i--;)r[i]=l(t[i]);return r}return e==="[object Set]"?(r=new Set,t.forEach(function(n){r.add(l(n))}),r):e==="[object Map]"?(r=new Map,t.forEach(function(n,o){r.set(l(o),l(n))}),r):e==="[object Date]"?new Date(+t):e==="[object RegExp]"?(r=new RegExp(t.source,t.flags),r.lastIndex=t.lastIndex,r):e==="[object DataView]"?new t.constructor(l(t.buffer)):e==="[object ArrayBuffer]"?t.slice(0):e.slice(-6)==="Array]"?new t.constructor(t):t}const H={path:"/",watch:!0,decode:t=>M(decodeURIComponent(t)),encode:t=>encodeURIComponent(typeof t=="string"?t:JSON.stringify(t))},v=window.cookieStore;function S(t,i){var u;const r={...H,...i};r.filter??(r.filter=c=>c===t);const e=C(r)||{};let n;r.maxAge!==void 0?n=r.maxAge*1e3:r.expires&&(n=r.expires.getTime()-Date.now());const o=n!==void 0&&n<=0,s=l(o?void 0:e[t]??((u=r.default)==null?void 0:u.call(r))),a=n&&!o?Y(s,n,r.watch&&r.watch!=="shallow"):I(s);{let c=null;try{!v&&typeof BroadcastChannel<"u"&&(c=new BroadcastChannel(`nuxt:cookies:${t}`))}catch{}const f=()=>{r.readonly||J(a.value,e[t])||(X(t,a.value,r),e[t]=l(a.value),c==null||c.postMessage({value:r.encode(a.value)}))},d=p=>{var y;const h=p.refresh?(y=C(r))==null?void 0:y[t]:r.decode(p.value);g=!0,a.value=h,e[t]=l(h),x(()=>{g=!1})};let g=!1;const k=!!P();if(k&&$(()=>{g=!0,f(),c==null||c.close()}),v){const p=h=>{const y=h.changed.find(b=>b.name===t),R=h.deleted.find(b=>b.name===t);y&&d({value:y.value}),R&&d({value:null})};v.addEventListener("change",p),k&&$(()=>v.removeEventListener("change",p))}else c&&(c.onmessage=({data:p})=>d(p));r.watch?D(a,()=>{g||f()},{deep:r.watch!=="shallow"}):f()}return a}function C(t={}){return B(document.cookie,t)}function V(t,i,r={}){return i==null?E(t,i,{...r,maxAge:-1}):E(t,i,r)}function X(t,i,r={}){document.cookie=V(t,i,r)}const z=2147483647;function Y(t,i,r){let e,n,o=0;const s=r?I(t):{value:t};return P()&&$(()=>{n==null||n(),clearTimeout(e)}),N((a,u)=>{r&&(n=D(s,u));function c(){o=0,clearTimeout(e);const f=i-o,d=f<z?f:z;e=setTimeout(()=>{if(o+=d,o<i)return c();s.value=void 0,u()},d)}return{get(){return a(),s.value},set(f){c(),s.value=f,u()}}})}const Q=()=>({isEnabled:()=>{const e=T().query;return Object.prototype.hasOwnProperty.call(e,"preview")&&!e.preview?!1:!!(e.preview||S("previewToken").value||sessionStorage.getItem("previewToken"))},getPreviewToken:()=>S("previewToken").value||sessionStorage.getItem("previewToken")||void 0,setPreviewToken:e=>{S("previewToken").value=e,T().query.preview=e||"",e?sessionStorage.setItem("previewToken",e):sessionStorage.removeItem("previewToken"),window.location.reload()}});export{Q as u};
